(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/land/index"],{2122:function(t,e,i){"use strict";i.r(e);var n=i("d156"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"2cde":function(t,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={tmButton:function(){return Promise.all([i.e("common/vendor"),i.e("components/tm-button/index")]).then(i.bind(null,"4ee1"))},tmSpin:function(){return Promise.all([i.e("common/vendor"),i.e("components/tm-spin/index")]).then(i.bind(null,"94e0"))},tmBadge:function(){return Promise.all([i.e("common/vendor"),i.e("components/tm-badge/index")]).then(i.bind(null,"e9c5"))},tmActionsheet:function(){return Promise.all([i.e("common/vendor"),i.e("components/tm-actionsheet/index")]).then(i.bind(null,"0244"))}},r=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e,i){var n=arguments[arguments.length-1].currentTarget.dataset,r=n.eventParams||n["event-params"];i=r.index;t.setting.tpl=i+1},t.e1=function(e){return t.handleToggleSwitch(e,"qrcode")})},o=[]},b7d5:function(t,e,i){"use strict";(function(t){i("d9e8");n(i("66fd"));var e=n(i("e84d"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},d156:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(i("a34a")),r=i("26cb"),o=l(i("760e")),c=i("9aed"),a=l(i("a12b"));function l(t){return t&&t.__esModule?t:{default:t}}function h(t,e,i,n,r,o,c){try{var a=t[o](c),l=a.value}catch(h){return void i(h)}a.done?e(l):Promise.resolve(l).then(n,r)}function u(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function c(t){h(o,n,r,c,a,"next",t)}function a(t){h(o,n,r,c,a,"throw",t)}c(void 0)}))}}function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){g(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f=function(){Promise.all([i.e("common/vendor"),i.e("pages/land/components/tp_layout")]).then(function(){return resolve(i("70f4"))}.bind(null,i)).catch(i.oe)},p={data:function(){return g({entry:{loading:!0,url:""},setting:{tpl:1,maxColors:5,viewTpls:[{id:1,blockHeight:150},{id:2},{id:3},{id:4},{id:5},{id:6,blockWidth:150,blockHeight:50},{id:7,blockWidth:80,blockHeight:80},{id:8,blockWidth:80,blockHeight:80},{id:9},{id:10},{id:11,blockWidth:185,blockHeight:37}],scrollTpls:[{id:1,blockHeight:30,imgMode:"aspectFill",customImgStyle:{height:"100rpx",marginTop:"6rpx"}},{id:2,blockHeight:25,imgMode:"aspectFill",customImgStyle:{height:"100rpx",marginTop:"16rpx"}},{id:3,blockHeight:25,imgMode:"aspectFill",customImgStyle:{height:"100rpx",marginTop:"16rpx"}},{id:4,blockWidth:25,blockHeight:25,imgMode:"aspectFill",customImgStyle:{height:"100rpx",marginRight:"4rpx"}},{id:5,blockWidth:25,blockHeight:25,imgMode:"aspectFill",customImgStyle:{height:"100rpx",marginRight:"4rpx"}},{id:6,blockWidth:60,blockHeight:20,imgMode:"aspectFill",customImgStyle:{height:"100%"}},{id:7,blockWidth:25,blockHeight:25,imgMode:"aspectFill",customImgStyle:{height:"100%"}},{id:8,blockWidth:25,blockHeight:25,imgMode:"aspectFill",customImgStyle:{height:"100%"}},{id:9,blockWidth:25,blockHeight:25,imgMode:"aspectFill",customImgStyle:{height:"90%"}},{id:10,blockWidth:25,blockHeight:25,imgMode:"aspectFill",customImgStyle:{height:"100%"}},{id:11,blockWidth:75,blockHeight:15,imgMode:"aspectFill",customImgStyle:{height:"100%"}}]},poster:{config:{}},feedback:{colorsList:!1,colorsSetting:!1,switch:{qrcode:!0}}},"poster",{config:{}})},components:{TpLayout:f},computed:s({},(0,r.mapState)({community:function(t){return t.home.community}})),onLoad:function(e){var i=e.url,n=e.lw_percent;i&&n?this.entry=s(s({},this.entry),{},{url:i,lw_percent:n}):this.handleNavigateBack(),t.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onReady:function(){var e=this;this.colorAnalysis=new o.default("color-palette"),t.getImageInfo({src:this.entry.url,success:function(t){var i=t.width,n=t.height,r=t.path;e.entry=s(s({},e.entry),{},{width:i,height:n,path:r}),e.handleColorAnalysis()}})},onShareAppMessage:function(t){var e=this.app.shares,i=this.entry,n=i.url,r=i.lw_percent;return{title:e.title,path:"pages/land/index?url=".concat(n,"&lw_percent=").concat(r,"&source=land")}},methods:{handleColorAnalysis:function(){var t=this,e=this.systemInfo.windowWidth,i=this.entry,n=i.width,r=i.height,o=i.path,a=.6*e/Math.max(n,r);this.colorAnalysis.getPalette({width:Math.floor(a*n),height:Math.floor(a*r),imgPath:o,maxColors:this.setting.maxColors,step:1},(function(e){t.entry=s(s({},t.entry),{},{rgbColors:e.map((function(t){return"rgb(".concat(t[0],",").concat(t[1],",").concat(t[2],")")})),hexColors:e.map((function(t){return(0,c.getRgbToHex)(t[0],t[1],t[2])})),loading:!1})}))},handleToggleSwitch:function(t,e){this.feedback.switch[e]=t.target.value},onPosterSuccess:function(e){var i=e.detail;i&&t.previewImage({current:i,urls:Array.of(i)})},onPosterFail:function(t){},handlePosterConfig:function(){var e=arguments,i=this;return u(n.default.mark((function r(){var o,c,l,h,u,d,g,f,p,b,m,k;return n.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=e.length>0&&void 0!==e[0]?e[0]:i.setting.tpl,o!==i.setting.scrollTpls.length){n.next=3;break}return n.abrupt("return",t.showToast({title:"模板".concat(o,"：近期版本支持哦"),icon:"none",mask:!0}));case 3:return n.next=5,i.handleGetRect(".land-box-item","boundingClientRect");case 5:return c=n.sent,n.next=8,i.handleGetRect(".land-box-item>>>.tpl-image","boundingClientRect");case 8:return l=n.sent,n.next=11,i.handleGetRect(".land-box-item>>>.tpl-item","boundingClientRect");case 11:h=n.sent,console.log("boxRes",c),console.log("imgRes",l),console.log("itemRes",h),u=i.entry,d=u.hexColors,g=u.lw_percent,f={},![4,5,8].includes(o)&&g<.68&&(c.height+=100,l.height+=100),o>3&&(l.height+=10),n.t0=o,n.next=1===n.t0?22:2===n.t0?24:3===n.t0?26:4===n.t0?28:5===n.t0?31:6===n.t0?34:7===n.t0?36:8===n.t0?38:9===n.t0?40:10===n.t0?42:44;break;case 22:return f={blocks:Array(5).fill().map((function(t,e){return{x:e?h.width*e+17*e:0,y:l.height+11,width:h.width+3,height:h.height,backgroundColor:d[e]}}))},n.abrupt("break",45);case 24:return f={blocks:Array(5).fill().map((function(t,e){return{x:e?h.width*e+17*e:3,y:l.height+4,width:h.width,height:h.height,borderRadius:h.width,backgroundColor:d[e]}}))},n.abrupt("break",45);case 26:return f={blocks:Array(5).fill().map((function(t,e){return{x:e?h.width*e+17*e:3,y:l.height+4,width:h.width,height:h.height,backgroundColor:d[e]}}))},n.abrupt("break",45);case 28:return p=g<.68?l.left-c.left:0,f={images:[{x:p,y:l.top-c.top,width:l.width,height:l.height,url:i.entry.url,zIndex:1}],blocks:Array(5).fill().map((function(t,e){return{x:p+l.width+10,y:h.top-c.top+h.height*e+8*e,width:h.width,height:h.height,backgroundColor:d[e]}}))},n.abrupt("break",45);case 31:return b=g<.68?h.left-c.left:0,f={images:[{x:b+h.width+10,y:l.top-c.top,width:l.width,height:l.height,url:i.entry.url,zIndex:1}],blocks:Array(5).fill().map((function(t,e){return{x:b,y:h.top-c.top+h.height*e+8*e,width:h.width,height:h.height,backgroundColor:d[e]}}))},n.abrupt("break",45);case 34:return f={blocks:Array(5).fill().map((function(t,e){return{x:h.left-c.left,y:h.top-c.top+h.height*e+8*e,width:h.width,height:h.height,backgroundColor:d[e],zIndex:2}}))},n.abrupt("break",45);case 36:return f={blocks:Array(5).fill().map((function(t,e){return{x:h.left-c.left+h.width*e+8*e,y:h.top-c.top,width:h.width,height:h.height,backgroundColor:d[e],zIndex:2}}))},n.abrupt("break",45);case 38:return f={blocks:Array(5).fill().map((function(t,e){return{x:h.left-c.left,y:h.top-c.top+h.height*e,width:h.width,height:h.height,backgroundColor:d[e],zIndex:2}}))},n.abrupt("break",45);case 40:return f={blocks:Array(5).fill().map((function(t,e){return{x:h.left-c.left+h.width*e,y:c.height-h.height,width:h.width,height:h.height,backgroundColor:d[e],zIndex:2}}))},n.abrupt("break",45);case 42:return f={blocks:Array(5).fill().map((function(t,e){return{x:h.left-c.left+32*e,y:c.height-h.height-16,width:h.width,height:h.height,borderRadius:h.width,backgroundColor:d[e],zIndex:2}}))},n.abrupt("break",45);case 44:return n.abrupt("break",45);case 45:m=s({images:[{x:0,y:0,width:g>.68?l.width:c.width,height:l.height,url:i.entry.url,zIndex:1}]},f),i.feedback.switch.qrcode&&(k=g>.68?90:50,m.images.push({x:c.width-233,y:c.height+k,width:120,height:120,borderRadius:120,url:i.app.images.qrcodes.home,zIndex:2}),m.texts=[{x:c.width-250,y:c.height+k+141,fontSize:12,color:"#000",text:"浅子色卡小助手｜图片调色板",zIndex:2}],m.blocks.push({x:0,y:c.height+k+150,width:c.width,height:1,backgroundColor:"#fff"})),i.poster.config=s({width:c.width,height:c.height,pixelRatio:3,backgroundColor:"#fff",debug:!1},m),i.$nextTick((function(){a.default.create(!0,i)}));case 49:case"end":return n.stop()}}),r)})))()},handleColorAction:function(e){var i=this,n=this.entry,r=n.rgbColors,o=n.hexColors;switch(e){case"copy":var c="rgbColors：".concat(r.join(","),"\nhexColors：").concat(o.join(","));t.setClipboardData({data:c,success:function(t){return i.feedback.colorsList=!0}});break;case"config":this.feedback.colorsSetting=!0;break;case"create":this.handlePosterConfig();break;default:break}}}};e.default=p}).call(this,i("543d")["default"])},e84d:function(t,e,i){"use strict";i.r(e);var n=i("2cde"),r=i("2122");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);i("431f");var c,a=i("f0c5"),l=Object(a["a"])(r["default"],n["b"],n["c"],!1,null,"1c9fd48a",null,!1,n["a"],c);e["default"]=l.exports}},[["b7d5","common/runtime","common/vendor"]]]);